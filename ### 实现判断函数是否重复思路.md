> ### 实现判断函数是否重复思路
> + 为了提高搜索效率, 每一条算式用哈希值表示, 所有算式聚合成一张哈希表
>
>   若哈希值相同, 则认为算式相同, 那么重点就在哈希值函数的编写
>
> + 哈希函数的编写: 
>
>   1. 按运算结果取模运算, 将所有算式均匀分布到哈希表中
>
>   2. 去除括号, 按照括号内算式->乘除运算->加减运算的顺序, 对算式从左到右进行排列
>
>   3. 对算式部分求哈希值, 若哈希值相同, 则认为是同一个式子
>
>      加入特例优化速度: 若两个算式只出现同等运算优先级的符号, 并且数值与结果都相同, 则认为是重复的. (设计弱点: 整个项目中, 一个算式只能生成一个左右括号, 没有实现多重括号, 所以此处使用哈希表判重是易于实现的.)
>
> + 具体实现
> 

# 性能优化



该测试是生成一万条数值100内的算式, 用时438ms, 该程序就耗时间的部分是生成每一条函数时调用了的随机函数

![1538240554086](C:\Users\Lenno\AppData\Local\Temp\1538240554086.png)

+ 优化方案

  + 因为randint产生最大系统耗时

  + 全部换用random原始函数,  借用mod取模运算实现range功能, 避免 randint调用过程中的 randrange耗时, 使用X1,X2两个参数辅助优化符号的选择, 具体实现如下图
  ![1538238587847](C:\Users\Lenno\AppData\Local\Temp\1538238587847.png)

  ![1538238647427](C:\Users\Lenno\AppData\Local\Temp\1538238647427.png)

  ![Randint改用Random](C:\Users\Lenno\AppData\Local\Temp\1538238956338.png)
  + 优化Print 文件写入, 用一个字符串out先生成全部算式, 再一次性写入到文件

    ![1538240922595](C:\Users\Lenno\AppData\Local\Temp\1538240922595.png)

优化效果如下

![1538241116142](C:\Users\Lenno\AppData\Local\Temp\1538241116142.png)



